{% extends "base.html" %}

{% block title %}編輯錯誤{% endblock %}

{% block content %}
    <h2>編輯錯誤記錄 (ID: {{ bug['id'] }})</h2>
    <form method="POST">
        <div class="mb-3">
            <label for="system" class="form-label">系統</label>
            <input type="text" class="form-control" id="system" name="system" value="{{ bug['system'] }}" required>
        </div>
        <div class="mb-3">
            <label for="bug_details" class="form-label">錯誤細節</label>
            <textarea class="form-control" id="bug_details" name="bug_details" required>{{ bug['bug_details'] }}</textarea>
        </div>
        <div class="mb-3">
            <label for="reported_by" class="form-label">報告者</label>
            <input type="text" class="form-control" id="reported_by" name="reported_by" value="{{ bug['reported_by'] }}" required>
        </div>
        <div class="mb-3">
            <label for="status" class="form-label">狀態</label>
            <select class="form-select" id="status" name="status">
                <option value="開放中" {% if bug['status'] == '開放中' %}selected{% endif %}>開放中</option>
                <option value="處理中" {% if bug['status'] == '處理中' %}selected{% endif %}>處理中</option>
                <option value="已解決" {% if bug['status'] == '已解決' %}selected{% endif %}>已解決</option>
                <option value="已關閉" {% if bug['status'] == '已關閉' %}selected{% endif %}>已關閉</option>
            </select>
        </div>
        <div class="mb-3">
            <label for="priority" class="form-label">優先級</label>
            <select class="form-select" id="priority" name="priority">
                <option value="低" {% if bug['priority'] == '低' %}selected{% endif %}>低</option>
                <option value="中" {% if bug['priority'] == '中' %}selected{% endif %}>中</option>
                <option value="高" {% if bug['priority'] == '高' %}selected{% endif %}>高</option>
            </select>
        </div>
        <div class="mb-3">
            <label for="severity" class="form-label">嚴重程度</label>
            <select class="form-select" id="severity" name="severity">
                <option value="輕微" {% if bug['severity'] == '輕微' %}selected{% endif %}>輕微</option>
                <option value="中" {% if bug['severity'] == '中' %}selected{% endif %}>中</option>
                <option value="重大" {% if bug['severity'] == '重大' %}selected{% endif %}>重大</option>
                <option value="嚴重" {% if bug['severity'] == '嚴重' %}selected{% endif %}>嚴重</option>
            </select>
        </div>
        <div class="mb-3">
            <label for="assigned_to" class="form-label">指派給</label>
            <input type="text" class="form-control" id="assigned_to" name="assigned_to" value="{{ bug['assigned_to'] or '' }}">
        </div>
        <div class="mb-3">
            <label for="notes" class="form-label">備註</label>
            <textarea class="form-control" id="notes" name="notes">{{ bug['notes'] or '' }}</textarea>
        </div>
        <button type="submit" class="btn btn-primary">更新</button>
        <a href="{{ url_for('index') }}" class="btn btn-secondary">取消</a>
    </form>
{% endblock %}